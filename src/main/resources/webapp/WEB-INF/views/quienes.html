<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
<title>Recipe2Me - Yo lo pienso, tu solo lo cocinas</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/png" sizes="16x16"
	th:href="@{/static/img/favicon-16x16.png}" href="/favicon-16x16.png" />
<link href='http://fonts.googleapis.com/css?family=Roboto'
	rel='stylesheet' type='text/css' />
<!-- <link th:href="@{/static/css/bootstrap.css}"
	href='../static/css/bootstrap.css' rel='stylesheet' type='text/css' />  -->
<link th:href="@{/static/css/theme.css}" href='../static/css/theme.css'
	rel='stylesheet' type='text/css' />
</head>
<body>
<div sec:authorize="isAuthenticated()">
<img src="static/img/froggy_hablando.gif" style="position:absolute; bottom:50px; right:0" alt="Completo" height="300px" width="300px" />
</div>

	<nav class="navbar navbar-default">
		<div class="container">
			<div class="navbar-header">
				<button aria-controls="navbar" aria-expanded="false"
					data-target="#navbar" data-toggle="collapse"
					class="navbar-toggle collapsed" type="button">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a href="#" class="navbar-brand">Recipe2Me</a>
			</div>
			<div class="collapse navbar-collapse" id="navbar">
				<ul class="nav navbar-nav">
					<li th:class="((${menu}=='home')?'active')" th:href="@{/home}"><a
						href="#">Inicio</a></li>
					<li th:class="((${menu}=='about')?'active')"><a
						th:href="@{/about}" href="#about">ÀQuienes Somos?</a></li>
					<li th:class="((${menu}=='contact')?'active')"><a
						th:href="@{/contact}" href="#contact">Contacto</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li sec:authorize="!isAuthenticated()"><a th:href="@{/signup}"
						href="/signup">Registrarse</a></li>
					<li sec:authorize="!isAuthenticated()" class="dropdown"><a
						class="dropdown-toggle" href="#" data-toggle="dropdown"
						role="button" aria-expanded="false">Entrar<span class="caret"></span></a>
						<div class="dropdown-menu" role="menu">
							<div class="col-sm-12">
								<form class="form" id="formLogin" th:action="@{/login}"
									method="POST">
									<input name="username" id="username" placeholder="Username"
										type="text" /> <input name="password" id="password"
										placeholder="Password" type="password" /><br />
									<button type="submit" id="btnLogin" class="btn">Login</button>
								</form>
							</div>
						</div></li>
					<li sec:authorize="isAuthenticated()"><a th:href="@{/logout}"
						href="/logout">Logout</a></li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</nav>
	<div class="container" style="margin-top:-20px">
    	<h1>¿Quienes Somos?</h1>
        <h3>Somos un grupo de estudiantes de Master en Ingeniería Informática en la UCM. Nuestro objetivo es realizar un
        sistema inteligente para la asignatura de "Desarrollo de Agentes y Sistemas Inteligentes"</h3>
        <div class="media">
  			<div class="media-left">
      			 <img class="media-object img-circle pull-left" src="assets/img/sergio.jpg" height="250px" width="250px"/>
  			</div>
  			<div class="media-body">
    			<h1 class="media-heading">Sergio García</h1>
                <h3 class="media-heading">Integrador</h3>
  			</div>
		</div>
        <div class="media">
  			<div class="media-left">
      			 <img class="media-object img-circle pull-left" src="assets/img/esteban.jpg" height="250px" width="250px"/>
  			</div>
  			<div class="media-body">
    			<h1 class="media-heading">Esteban Armas</h1>
                <h3 class="media-heading">Recurso persistencia Mongo</h3>
  			</div>
		</div>
        <div class="media">
  			<div class="media-left">
      			 <img class="media-object img-circle pull-left" src="assets/img/sergio.jpg" height="250px" width="250px"/>
  			</div>
  			<div class="media-body">
    			<h1 class="media-heading">Sergio García</h1>
                <h3 class="media-heading">Integrador</h3>
  			</div>
		</div>
        <div class="media">
  			<div class="media-left">
      			 <img class="media-object img-circle pull-left" src="assets/img/ivan.jpg" height="250px" width="250px"/>
  			</div>
  			<div class="media-body">
    			<h1 class="media-heading">Ivan Manuel Laclaustra</h1>
                <h3 class="media-heading">Agente y Reglas</h3>
  			</div>
		</div>
        <div class="media">
  			<div class="media-left">
      			 <img class="media-object img-circle pull-left" src="assets/img/javier.jpg" height="250px" width="250px"/>
  			</div>
  			<div class="media-body">
    			<h1 class="media-heading">Javier Mansilla</h1>
                <h3 class="media-heading">Agente y Reglas</h3>
  			</div>
		</div>
        <div class="media">
  			<div class="media-left">
      			 <img class="media-object img-circle pull-left" src="assets/img/jesus.jpg" height="250px" width="250px"/>
  			</div>
  			<div class="media-body">
    			<h1 class="media-heading">Jesús Martín</h1>
                <h3 class="media-heading">Recurso Comunicación web</h3>
  			</div>
		</div>
        
    </div>
    
    
    
    
	<footer>
		<div th:each="mess : ${info}"
			class="alert alert-success alert-dismissible" role="alert">
			<button type="button" class="close" data-dismiss="alert"
				aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
			<strong>Warning! </strong>
			<p th:text="${mess}"></p>
		</div>
		<div th:each="mess : ${error}"
			class="alert alert-warning alert-dismissible" role="alert">
			<button type="button" class="close" data-dismiss="alert"
				aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
			<strong>Warning! </strong>
			<p th:text="${mess}"></p>
		</div>
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 id="recipe_title" class="modal-title">Modal title</h4>
					</div>
					<div id="recipe_content" class="modal-body">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						<button type="button" class="btn btn-primary">Save
							changes</button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<!-- /.modal -->
		<script th:src="@{/static/js/jquery.js}" src="../static/js/jquery.js"></script>
		<script th:src="@{/static/js/npm.js}" src="../static/js/npm.js"></script>
		<script src="//cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
		<script th:src="@{/static/js/stomp.js}" src="../static/js/stomp.js"></script>
		<script th:src="@{/static/js/bootstrap.js}"
			src="../static/js/bootstrap.js"></script>
		<script sec:authorize="isAuthenticated()" th:inline="javascript">
			/*<![CDATA[*/
			var stompClient = null;
			$(document).ready(
					function(){
						$("#input").keyup(function(e){
						    if((e.keyCode || e.which) == 13) { //Enter keycode
						    	$("#input").prop( "disabled", true );
						    	$("#inputbtn").prop("disabled",true);
						    	sendName();
						      }
						     });
						 connect();    
					    }
					);

			function setConnected(connected) {
				document.getElementById('response').innerHTML = '';
			}

			function connect() {
				var socket = new SockJS('/ws');
				var userName = /*[[${#authentication.name}]]*/'sga.vmp';
				stompClient = Stomp.over(socket);
				stompClient
						.connect(
								{},
								function(frame) {
									setConnected(true);
									console.log('Connected: ' + frame);
									stompClient
											.subscribe(
													'/recipe/user/' + userName
															+ '/chat',
													function(greeting) {
														$('#input').val('');
														$('#input').prop(
																"disabled",
																false);
														$('#inputbtn').prop(
																"disabled",
																false);
														showGreeting(JSON
																.parse(greeting.body).content);
														showRecipe(JSON
																.parse(greeting.body).recipe);
													});
								});
			}

			function disconnect() {
				if (stompClient != null) {
					stompClient.disconnect();
				}
				setConnected(false);
				console.log("Disconnected");
			}
			
		</script>
	</footer>
</body>
</html>
